<div class="seccion">
  <h1>Gestión de las rutas de Transmilenio</h1>
  <div class="container">
    <button (click)="mostrarGuia()" class="btn-guia">Ver Guía de Rutas</button>
    <div class="nav-style">

      <!-- desplegamos el buscador de rutas -->
      <app-r-buscar-ruta (search)="onSearch($event)"></app-r-buscar-ruta>
    </div>

    <!-- Animación de carga -->
    <div *ngIf="isLoading" class="loading-animation">
      <ng-lottie [options]="options" ></ng-lottie>
    </div>

    <div *ngIf="!isLoading" class="grid">

      <!-- desplegamos las rutas -->
      <app-r-modulo-ruta *ngFor="let ruta of rutas$ | async" [ruta]="ruta" (rutaSelected)="seleccionarRuta($event)"></app-r-modulo-ruta>
    </div>

    <div *ngIf="selectedRuta || guiaVisible" class="modal-backdrop" (click)="cerrarModal()"></div>

    <!-- desplegamos los detalles de la ruta seleccionada -->
    <app-r-detalles-ruta *ngIf="selectedRuta" [ruta]="selectedRuta" (close)="cerrarDetalles()"></app-r-detalles-ruta>

    <!-- desplegamos la edición de la ruta seleccionada -->
    <app-r-editar-ruta *ngIf="editRuta" [ruta]="selectedRuta" (close)="cerrarEditar()"></app-r-editar-ruta>

    <!-- desplegamos la guía de rutas -->
    <div *ngIf="guiaVisible" class="modal guia-modal">
      <button (click)="cerrarGuia()" class="modal-close">
        <i class="icon-close"></i>
      </button>
      <img ngSrc="./assets/images/rutasTransmi.png" alt="Rutas TransMilenio" height="880" width="1070">
    </div>

  </div>
</div>
